Основная идея алгоритма - составление группы игроков по вычисленному времени из формулы

abs(A.rank - B.rank) <= waiting_time(A) / 5000 + waiting_time(B) / 5000 , где waiting_time(A) = (текущее время) - enter_time(A)

по этой формуле минимальное время, когда условие для игроков начнет выполнятся:

время битвы = abs(A.rank - B.rank) * 2500 + (enter_time(A) + enter_time(В)) / 2

Суть алгоритма сводиться к составлению всех возможных комбинаций из 8 игроков, вычислению максимального
времени биты для каждой комбинации и сортировки этих потенциальных групп по времени чтобы первыми были
группы у которых битва начнется раньше всего

При тестировании возникли проблемы когда в очередь добавляется более 30 игроков - комбинации по 8 пользователей
перебираются слишком долго, поэтому была сделана модернизация: при игроки из очереди сортируются по времени 
битвы и далее комбинации выбираются по первым 16 из них пока в отсортированной очереди остается достаточно игроков
для составления группы. 